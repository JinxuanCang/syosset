%header.header
  .header-main.container
    .container
      %h1.logo.pull-left
        = link_to root_path do
          = svg 'logo'
          .full-name.pull-right.visible-lg
            = svg 'full_name'
      .info.col-md-4-col-sm-4.pull-right
        %br
        %br
        %ul.menu-top.navbar-right.hidden-xs
          %li.divider
            = link_to t('nav.home'), root_path
          %li
            = link_to t('nav.contact'), root_path #TODO: link
        .contact
          %p.phone
            %i.fa.fa-phone
            = t('contact.phone')
          %p.email
            %i.fa.fa-envelope
            = t('contact.email')

%nav.main-nav{role: :navigation}
  .container
    .navbar-header
      %button.navbar-toggle{"data-target" => "#navbar-collapse", "data-toggle" => "collapse", :type => "button"}
        %span.sr-only Toggle navigation
        %span.icon-bar
        %span.icon-bar
        %span.icon-bar
    #navbar-collapse.navbar-collapse.collapse
      %ul.nav.navbar-nav
        %li.nav-item{class: active_controller('welcome', 'index')}
          = link_to t('nav.home'), root_path
        %li.nav-item{class: active_controller('welcome', 'about')}
          = link_to t('nav.about'), about_path
        %li.nav-item.dropdown
          %a.dropdown-toggle{"data-close-others" => "false", "data-delay" => "0", "data-hover" => "dropdown", "data-toggle" => "dropdown", :href => "#"}
            = t('nav.departments')
            %i.fa.fa-angle-down
          %ul.dropdown-menu
            %li= link_to "All #{t('nav.departments')}", "#"
        %li.nav-item.dropdown
          %a.dropdown-toggle{"data-close-others" => "false", "data-delay" => "0", "data-hover" => "dropdown", "data-toggle" => "dropdown", :href => "#"}
            = t('nav.extracurriculars')
            %i.fa.fa-angle-down
          %ul.dropdown-menu
            %li= link_to "All #{t('nav.extracurriculars')}", "#"
      %ul.nav.navbar-nav.pull-right
        %li.nav-item.red-white-display
          = link_to "#" do
            - if color = $redis.get("current_day_color")
              %i.fa{class: "#{color == "Red Day" ? "fa-map-o" : "fa-map"}"}
              Today is a
              = color
            - else
              %i.fa.fa-thumbs-up
              No school today

        %li.nav-item.dropdown
          %a.dropdown-toggle{"data-close-others" => "false", "data-delay" => "0", "data-hover" => "dropdown", "data-toggle" => "dropdown", :href => "#"}
            - if user_signed_in?
              = current_user.name
            - else
              %i.fa.fa-user
            %b.caret
          %ul.dropdown-menu
            - if user_signed_in?
              %li
                =link_to t('menu.account.edit'), edit_user_registration_path
              %li
                =link_to t('menu.account.sign_out'), destroy_user_session_path, :method => :delete
            - else
              %li
                =link_to t('menu.account.sign_in'), new_user_session_path
              %li
                =link_to t('menu.account.sign_up'), new_user_registration_path
        %li.nav-item.dropdown
          %a.dropdown-toggle{"data-close-others" => "false", "data-delay" => "0", "data-hover" => "dropdown", "data-toggle" => "dropdown", :href => "#"}
            %span.badge.visible-md-inline.visible-lg-inline{class: @alert_count > 0 ? "badge-warning" : ""}= @alert_count
            .visible-xs.visible-sm
              %i.fa.fa-exclamation-circle
              Alerts
              %b.caret
          %ul.dropdown-menu.dropdown-menu-right
            - @alerts.each do |alert|
              %li= render partial: 'partials/alerts/alert', object: alert
            - if @alert_count > 25
              %li
                %a{:href => alerts_path} And #{@alert_count - 25} more...
            - if @alert_count == 0
              %li
                %a{href: alerts_path} No unread alerts!
